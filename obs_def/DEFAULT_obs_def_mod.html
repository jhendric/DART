<!--
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!                                                                       !!
!!                   GNU General Public License                          !!
!!                                                                       !!
!! This file is part of the Data Assimilation Research Testbed (DART).   !!
!!                                                                       !!
!! DART is free software; you can redistribute it and/or modify          !!
!! it and are expected to follow the terms of the GNU General Public     !!
!! License as published by the Free Software Foundation.                 !!
!!                                                                       !!
!! DART is distributed in the hope that it will be useful,               !!
!! but WITHOUT ANY WARRANTY; without even the implied warranty of        !!
!! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         !!
!! GNU General Public License for more details.                          !!
!!                                                                       !!
!! You should have received a copy of the GNU General Public License     !!
!! along with DART; if not, write to:                                    !!
!!          Free Software Foundation, Inc.                               !!
!!          59 Temple Place, Suite 330                                   !!
!!          Boston, MA  02111-1307  USA                                  !!
!! or see:                                                               !!
!!          http://www.gnu.org/licenses/gpl.txt                          !!
!!                                                                       !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-->

<HTML>
<TITLE>module DEFAULT_obs_def_mod</TITLE>
<link rel=stylesheet type=text/css href=../doc/html/doc.css>
<BODY>


<!--==================================================================-->

<H1>MODULE DEFAULT_obs_def_mod</H1>
<A NAME="HEADER"></A>
<TABLE summary="">
   <TR><TD>Contact:       </TD><TD> Jeff Anderson                </TD></TR>
   <TR><TD>Reviewers:     </TD><TD> &nbsp;                       </TD></TR>
   <TR><TD>Revision:      </TD><TD> $Revision$             </TD></TR>
   <TR><TD>Release Name:  </TD><TD> $Name$                       </TD></TR>
   <TR><TD>Change Date:   </TD><TD> $Date$ </TD></TR>
   <TR><TD>Change history:</TD><TD> see CVS log                  </TD></TR>
</TABLE>

<!--==================================================================-->

<A NAME="OVERVIEW"></A>
<HR>
<H2>OVERVIEW</H2>

Beginning with the I-release of DART, a more flexible. powerful (and complicated)
mechanism for incorporating new types of observations is part of DART. The
DEFAULT_obs_def module being described here is used by the program preprocess.f90
to create the obs_def_mod.f90 (documented separately in this directory). 
Information from zero or more special obs_def modules
(such as obs_def_1d_state_mod.f90 or obs_def_reanalyis_bufr_mod.f90)
which are also documented in this directory are incorporated into the 
template provided by DEFAULT_obs_def_mod. If no special obs_def files are 
included in the preprocessor namelist, a minimal obs_def_mod.f90 is created which
can only support identity forward observation operators. 
Any identity observations on the obs_seq.out file will be assimilated,
regardless of the kinds specified in assimilate_these_obs_types.
</P>

<P> 
This documentation file only describes the special formatting that is included
in the DEFAULT_obs_def_mod in order to guide the preprocess program. Up to 
six sections of code are inserted into the DEFAULT_obs_def_mod from each of
the special obs_def modules that are requested. The insertion point for each
section is denoted by a special comment line that must be included VERBATIM
in DEFAULT_obs_def_mod. These special comment lines and their significance are:
</P>

<P>
1. ! DART PREPROCESS USE FOR OBS_KIND_MOD INSERTED HERE <BR>
Integer identifiers with a unique integer value corresponding to each available
observation kind are defined in a table in the obs_kind_mod which is also created
by the preprocessor. The use statements for these entries are inserted here.
</P>

<P>
2. ! DART PREPROCESS USE OF SPECIAL OBS_DEF MODULE INSERTED HERE <BR>
Some special observation definition modules (see for instance obs_def_1d_raw_state_mod.f90)
contain code for evaluating forward observation operators, reading or writing
special information about an observation definition to an obs sequence file, or
for interactive definition of an observation. The use statements for these routines
from the special observation definition modules are inserted here.
</P>

<P>
3.       ! DART PREPROCESS GET_EXPECTED_OBS_FROM_DEF INSERTED HERE <BR>
Special observation definition modules must contain case statement code saying
what to do to evaluate a forward observation operator for each observation kind
that they define. This code is inserted here.
</P>

<P>
4. ! DART PREPROCESS READ_OBS_DEF INSERTED HERE <BR>
Special observation definition modules must contain case statement code saying
what to do to read any additional information required for each observation kind
that they define from an observation sequence file. This code is inserted here.
</P>

<P>
5. ! DART PREPROCESS WRITE_OBS_DEF INSERTED HERE <BR>
Special observation definition modules must contain case statement code saying
what to do to write any additional information required for each observation kind
that they define to an observation sequence file. This code is inserted here.
</P>

<P>
6. ! DART PREPROCESS INTERACTIVE_OBS_DEF INSERTED HERE <BR>
Special observation definition modules must contain case statement code saying
what to do to interactively create any additional information required for each 
observation kind that they define. This code is inserted here.

</P>
<P>




<BR>

<!--==================================================================-->
