<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<TITLE>PROGRAM perfect_model_obs</TITLE>
<link rel="stylesheet" type="text/css" href="../doc/html/doc.css">
<link href="../doc/html/dart.ico" rel="shortcut icon" />
</HEAD>
<BODY>
<A NAME="TOP"></A>

<H1>PROGRAM <em class=program>perfect_model_obs</em></H1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="../doc/html/Dartboard7.png" alt="DART project logo" height=70 />
    </td>
    <td>
       <P>Jump to <a href="../index.html">DART Documentation Main Index</a><br />
          <small><small>version information for this file: <br />
          <!-- version tag follows, do not edit -->
          $Id$</small></small>
       </P></td>
</tr>
</table>

<A HREF="#Namelist">NAMELIST</A> /
<A HREF="#Modules">MODULES</A> /
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#Legalese">TERMS OF USE</A>

<H2>Overview</H2>

<P>
   Main program for creating synthetic observation sequences given a
   model for use in filter assimilations. Reads in an observation sequence
   file which has only observation definitions and generates synthetic
   observation values for an output observation sequence file. The 
   execution of perfect_model_obs is controlled by the input observation
   sequence file and the model time-stepping capabilities in a manner
   analogous to that used by the filter program.
</P>

<!--================================================================-->
<!--============== DESCRIPTION OF A NAMELIST ========================-->
<!--================================================================-->

<A NAME="Namelist"></A>
<HR>
<H2>NAMELIST</H2>
<P>We adhere to the F90 standard of starting a namelist with an ampersand
'&amp;' and terminating with a slash '/' for all our namelist input.
Character strings that contain a '/' must be
enclosed in quotes to prevent them from prematurely terminating the namelist.
</P>
<div class=namelist>
<pre>
<em class=call>namelist / perfect_model_obs_nml / </em>
start_from_restart, output_restart, async, init_time_days, init_time_seconds,
first_obs_days, first_obs_seconds, last_obs_days, last_obs_seconds, output_interval,
restart_in_file_name, restart_out_file_name, obs_seq_in_file_name, obs_seq_out_file_name,
adv_ens_command, tasks_per_model_advance, obs_window_days, obs_window_seconds,
output_forward_op_errors, output_timestamps, trace_execution, print_every_nth_obs,
silence
</pre>
</div>

<div class=indent1>
<!-- Description -->

<P>
Controls execution of synthetic observation generation.
</P>

<P>
This namelist is read in a file called <em class=file>input.nml</em>
</P>

<TABLE border=0 cellpadding=3 width=100%>
<TR><TH align=left>Contents    </TH>
    <TH align=left>Type        </TH>
    <TH align=left>Description </TH></TR>
<TR><!--contents--><TD valign=top>start_from_restart</TD>
    <!--  type  --><TD>logical</TD>
    <!--descript--><TD>.true. means read starting state data from a restart file, 
                       .false. means ask model for an initial condition.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>output_restart</TD>
    <!--  type  --><TD>logical</TD>
    <!--descript--><TD>.true. means output a restart file.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>async</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>Controls method for advancing model:
                       0&nbsp;==&nbsp;subroutine&nbsp;call,
                       2&nbsp;==&nbsp;shell&nbsp;command, single task model.
                       4&nbsp;==&nbsp;shell&nbsp;command, parallel model.
                       Default: 0</TD></TR>

<TR><!--contents--><TD valign=top>init_time_days</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, override the initial data time read from restart file.
                       Default: 0</TD></TR>

<TR><!--contents--><TD valign=top>init_time_seconds</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative don't use. 
                       If non-negative, override the initial data time read from restart file.
                       Default: 0</TD></TR>

<TR><!--contents--><TD valign=top>first_obs_days</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, ignore any observations before this time.
                       Default: -1</TD></TR>

<TR><!--contents--><TD valign=top>first_obs_seconds</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, ignore any observations before this time.
                       Default: -1</TD></TR>

<TR><!--contents--><TD valign=top>last_obs_days</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, ignore any observations after this time.
                       Default: -1</TD></TR>

<TR><!--contents--><TD valign=top>last_obs_seconds</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, ignore any observations after this time.
                       Default: -1</TD></TR>

<TR><!--contents--><TD valign=top>output_interval</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>Output state and observation diagnostics every nth 
                       assimilation time, n is output_interval. Default: 1</TD></TR>

<TR><!--contents--><TD valign=top>restart_in_file_name</TD>
    <!--  type  --><TD>character(len=129)</TD>
    <!--descript--><TD>File containing state restart vector. 
                       Default: 'perfect_ics'</TD></TR>

<TR><!--contents--><TD valign=top>restart_out_file_name</TD>
    <!--  type  --><TD>character(len=129)</TD>
    <!--descript--><TD>File to which to write state restart state vectors. 
                       Default: 'perfect_restart'</TD></TR>

<TR><!--contents--><TD valign=top>obs_seq_in_file_name</TD>
    <!--  type  --><TD>character(len=129)</TD>
    <!--descript--><TD>File name from which to read an observation sequence.
                       Default: 'obs_seq.in'</TD></TR>

<TR><!--contents--><TD valign=top>obs_seq_out_file_name</TD>
    <!--  type  --><TD>character(len=129)</TD>
    <!--descript--><TD>File name to which to write output observation sequence.
                       Default: 'obs_seq.out'</TD></TR>

<TR><!--contents--><TD valign=top>adv_ens_command</TD>
    <!--  type  --><TD>character(len=129)</TD>
    <!--descript--><TD>Command sent to shell if async&nbsp;==&nbsp;2 or 4.
                       Default: './advance_model.csh'</TD></TR>

<TR><!--contents--><TD valign=top>output_forward_op_errors</TD>
    <!--  type  --><TD valign=top>logical</TD>
    <!--descript--><TD>True means output errors from forward observation operators.
                       This is the 'istatus' error return code from the model
                       interpolate routine.  An ascii text file 'forward_op_errors'
                       will be created in the current directory.  Each line will 
                       contain an observation key number, and the istatus return code.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>output_timestamps</TD>
    <!--  type  --><TD valign=top>logical</TD>
    <!--descript--><TD>True means output timestamps before and after the model advance
                       and the forward observation computation phases.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>trace_execution</TD>
    <!--  type  --><TD valign=top>logical</TD>
    <!--descript--><TD>True means output very detailed messages about what routines
                       are being called in the main loop.  Useful if a job
                       hangs or otherwise doesn't execute as expected.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>silence</TD>
    <!--  type  --><TD valign=top>logical</TD>
    <!--descript--><TD>True means output almost no runtime messages.  Not recommended
                       for general use, but can speed test programs if the execution
                       time becomes dominated by the volume of output.
                       Default: .false.</TD></TR>

<TR><!--contents--><TD valign=top>tasks_per_model_advance</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>Reserved for future use.
                       Default: 1</TD></TR>

<TR><!--contents--><TD valign=top>obs_window_days</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, reserved for future use.
                       Default: -1</TD></TR>

<TR><!--contents--><TD valign=top>obs_window_seconds</TD>
    <!--  type  --><TD>integer</TD>
    <!--descript--><TD>If negative, don't use.
                       If non-negative, reserved for future use.
                       Default: -1</TD></TR>

</TABLE>

</div>
<br>

<!--==================================================================-->

<A NAME="Modules"></A>
<HR>
<H2>MODULES USED</H2>
<PRE>
types_mod
utilities_mod
time_manager_mod
obs_sequence_mod
obs_def_mod
obs_model_mod
assim_model_mod
mpi_utilities_mod
random_seq_mod
ensemble_manager_mod
</PRE>

<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<HR>
<H2>FILES</H2>
<UL><LI>observation sequence input file; name comes from obs_seq_in_file_name
   <LI>observation sequence output file; name comes from obs_seq_out_file_name
   <LI>input state vector file; name comes from restart_in_file_name
   <LI>output state vector file; name comes from restart_out_file_name
   <LI>perfect_model_mod.nml in input.nml
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<HR>
<H2>REFERENCES</H2>
<ul>
<li> none </li>
</ul>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!--==================================================================-->

<A NAME="Errors"></A>
<HR>
<H2>ERROR CODES and CONDITIONS</H2>
<div class=errors>
<TABLE border=1 cellspacing=1 cellpadding=10 width=100%>
<TR><TH>Routine</TH><TH>Message</TH><TH>Comment</TH></TR>

<TR><!-- routine --><TD VALIGN=top>perfect_main</TD>
    <!-- message --><TD VALIGN=top>Only use one mpi process here: ### were requested</TD>
    <!-- comment --><TD VALIGN=top>Don't use mpi for this.</TD>
</TR>

</TABLE>
</div>

<H2>KNOWN BUGS</H2>
<P>
none
</P>

<!--==================================================================-->
<!-- Descibe Future Plans.                                            -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<HR>
<H2>FUTURE PLANS</H2>
<P>
none
</P>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<A NAME="Legalese"></A>
<HR>
<H2>Terms of Use</H2>

<P>
DART software - Copyright 2004 - 2011 UCAR.<br>
This open source software is provided by UCAR, "as is",<br>
without charge, subject to all terms of use at<br>
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</P>

<TABLE border=0 cellpadding=0 width=100% summary="">
<TR><TD valign=top>Contact:       </TD><TD> DART core group   </TD></TR>
<TR><TD valign=top>Revision:      </TD><TD> $Revision$ </TD></TR>
<TR><TD valign=top>Source:        </TD><TD> $URL$ </TD></TR>
<TR><TD valign=top>Change Date:   </TD><TD> $Date$ </TD></TR>
<TR><TD valign=top>Change&nbsp;history:&nbsp;</TD><TD> try "svn&nbsp;log" or "svn&nbsp;diff" </TD></TR>
</TABLE>

<!--==================================================================-->

</BODY>
</HTML>
