<HTML>
<HEAD>
<TITLE>PROGRAM perfect_model_obs</TITLE>
<link rel="stylesheet" type="text/css" href="../doc/html/doc.css"></link> 
</HEAD>
<BODY>
<!--
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!                                                                       !!
!!                   GNU General Public License                          !!
!!                                                                       !!
!! This file is part of the Data Assimilation Research Testbed (DART).   !!
!!                                                                       !!
!! DART is free software; you can redistribute it and/or modify          !!
!! it and are expected to follow the terms of the GNU General Public     !!
!! License as published by the Free Software Foundation.                 !!
!!                                                                       !!
!! DART is distributed in the hope that it will be useful,               !!
!! but WITHOUT ANY WARRANTY; without even the implied warranty of        !!
!! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         !!
!! GNU General Public License for more details.                          !!
!!                                                                       !!
!! You should have received a copy of the GNU General Public License     !!
!! along with DART; if not, write to:                                    !!
!!          Free Software Foundation, Inc.                               !!
!!          59 Temple Place, Suite 330                                   !!
!!          Boston, MA  02111-1307  USA                                  !!
!! or see:                                                               !!
!!          http://www.gnu.org/licenses/gpl.txt                          !!
!!                                                                       !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-->

<!--kdr PUBLIC COMPONENTS, PRIVATE COMPONENTS have no destinations --> 
<DIV ALIGN=CENTER>
<A HREF="#PublicEntities">PUBLIC COMPONENTS</A> / 
<A HREF="#Namelist">NAMELIST</A> / 
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#KnownBugs">BUGS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#PrivateComponents">PRIVATE COMPONENTS</A>
</DIV>

<!--==================================================================-->

<H1>PROGRAM perfect_model_obs</H1>
<A NAME="HEADER"></A>
<TABLE summary="">
<TR><TD>Contact:       </TD><TD> Jeff Anderson     </TD></TR>
<TR><TD>Revision:      </TD><TD> $Revision$ </TD></TR>
<TR><TD>Source:        </TD><TD> $URL$ </TD></TR>
<TR><TD>Change Date:   </TD><TD> $Date$ </TD></TR>
<TR><TD>Change history:</TD><TD> try "svn log" or "svn diff" </TD></TR>
</TABLE>

<!--==================================================================-->

<A NAME="OVERVIEW"></A>
<HR>
<H2>OVERVIEW</H2>

<P>
   Main program for creating synthetic observation sequences given a
   model for use in filter assimilations. Reads in an observation sequence
   file which has only observation definitions and generates synthetic
   observation values for an output observation sequence file. The 
   execution of perfect_model_obs is controlled by the input observation
   sequence file and the model time-stepping capabilities in a manner
   analogous to that used by the filter program.
</P>

<P>
Optional namelist interface
<A HREF="#Namelist"> <em class=code>&#38;assim_model_nml</em> </A>
may be read from file <em class=file>input.nml</em>.
</P>


<!--==================================================================-->

<A NAME="OTHER MODULES USED"></A>
<BR><HR><BR>
<H2>OTHER MODULES USED</H2>
<PRE>
types_mod
utilities_mod
time_manager_mod
obs_sequence_mod
obs_def_mod
obs_model_mod
assim_model_mod
mpi_utilities_mod
random_seq_mod
ensemble_manager_mod
</PRE>


<!--================================================================-->
<!--============== DESCRIPTION OF A NAMELIST ========================-->
<!--================================================================-->
 <A NAME="Namelist"></A>
 <BR><HR><BR>
 <H2>NAMELIST</H2>
 <P>We adhere to the F90 standard of starting a namelist with an ampersand
 '&#38;' and terminating with a slash '/'.
 <div class=namelist><pre>
 <em class=call>namelist / perfect_model_obs_nml / </em>
 start_from_restart, output_restart, async, init_time_days, init_time_seconds, 
 output_interval, restart_in_file_name, restart_out_file_name, 
 obs_seq_in_file_name, obs_seq_out_file_name, adv_ens_command

 </pre></div>
 <H3 class=indent1>Discussion</H3>
 <P>
 Controls execution of synthetic observation generation
 </P>
 <P>
 This namelist is read in a file called <em class=file>input.nml</em>
 </P>
 <TABLE border=0 cellpadding=3 width=100%>
 <TR><TH align=left>Contents    </TH>
     <TH align=left>Type        </TH>
     <TH align=left>Description </TH></TR>
 <TR><!--contents--><TD valign=top>start_from_restart</TD>
     <!--  type  --><TD>logical</TD>
     <!--descript--><TD>.true. means start from a restart file, 
                        .false. means ask model for an initial condition.
                        Default: .false.</TD></TR>

 <TR><!--contents--><TD valign=top>output_restart</TD>
     <!--  type  --><TD>logical</TD>
     <!--descript--><TD>.true. means output a restart file.
                        Default: .false.</TD></TR>

 <TR><!--contents--><TD valign=top>async</TD>
     <!--  type  --><TD>integer</TD>
     <!--descript--><TD>Controls method for advancing model:
                        0&nbsp;==&nbsp;subroutine&nbsp;call,
                        2&nbsp;==&nbsp;shell&nbsp;command.
                        Default: 0</TD></TR>

 <TR><!--contents--><TD valign=top>init_time_days</TD>
     <!--  type  --><TD>integer</TD>
     <!--descript--><TD>If negative, don't use.
                        If non-negative, override the initial days read from restart.
                        Default: 0</TD></TR>

 <TR><!--contents--><TD valign=top>init_time_seconds</TD>
     <!--  type  --><TD>integer</TD>
     <!--descript--><TD>If negative don't use. 
                        If non-negative, override the initial seconds read from restart.
                        Default: 0</TD></TR>

 <TR><!--contents--><TD valign=top>output_interval</TD>
     <!--  type  --><TD>integer</TD>
     <!--descript--><TD>Output state and observation diagnostics every nth 
                        assimilation time, n is output_interval. Default: 1</TD></TR>

 <TR><!--contents--><TD valign=top>restart_in_file_name</TD>
     <!--  type  --><TD>character(len=129)</TD>
     <!--descript--><TD>File containing state restart vector. 
                        Default: 'perfect_ics'</TD></TR>

 <TR><!--contents--><TD valign=top>restart_out_file_name</TD>
     <!--  type  --><TD>character(len=129)</TD>
     <!--descript--><TD>File to which to write state restart state vectors. 
                        Default: 'perfect_restart'</TD></TR>

 <TR><!--contents--><TD valign=top>obs_seq_in_file_name</TD>
     <!--  type  --><TD>character(len=129)</TD>
     <!--descript--><TD>File name from which to read an observation sequence.
                        Default: 'obs_seq.in'</TD></TR>

 <TR><!--contents--><TD valign=top>obs_seq_out_file_name</TD>
     <!--  type  --><TD>character(len=129)</TD>
     <!--descript--><TD>File name to which to write output observation sequence.
                        Default: 'obs_seq.out'</TD></TR>

 <TR><!--contents--><TD valign=top>adv_ens_command</TD>
     <!--  type  --><TD>character(len=129)</TD>
     <!--descript--><TD>Command sent to shell if async&nbsp;==&nbsp;2.
                        Default: './advance_model.csh'</TD></TR>

 </TABLE>
 <BR><BR>


<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<BR><HR><BR>
<H2>FILES</H2>
<UL><LI>observation sequence input file; name comes from obs_seq_in_file_name
   <LI>observation sequence output file; name comes from obs_seq_out_file_name
   <LI>input state vector file; name comes from restart_in_file_name
   <LI>output state vector file; name comes from restart_out_file_name
   <LI>perfect_model_mod.nml in input.nml
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<BR><HR><BR>
<H2>REFERENCES</H2>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!-- Putting a <BR> after the synopsis creates a nice effect.         -->
<!--==================================================================-->


<A NAME="Errors"></A>
<HR>
<H2>ERROR CODES and CONDITIONS</H2>
<div class="errors">
<TABLE border=1 cellspacing=1 cellpadding=10 width=100%>
<TR><TH>Routine</TH><TH>Message</TH><TH>Comment</TH></TR>

<TR><!-- routine --><TD VALIGN=top>perfect_main</TD>
    <!-- message --><TD VALIGN=top>Only use one mpi process here: ### were requested</TD>
    <!-- comment --><TD VALIGN=top>Don't use mpi for this.</TD>
</TR>

</TABLE>
</div>

<!--==================================================================-->
<!-- Describe the bugs.                                               -->
<!--==================================================================-->

<A NAME="KnownBugs"></A>
<BR><HR><BR>
<H2>KNOWN BUGS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Descibe Future Plans.                                            -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<BR><HR><BR>
<H2>FUTURE PLANS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Have not fleshed out this part yet ... ha ha ha                  -->
<!--==================================================================-->


<H3 class=indent1>Discussion</H3>

<!--==================================================================-->

<HR>
</BODY>
</HTML>
