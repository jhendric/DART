<!--
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!                                                                       !!
!!                   GNU General Public License                          !!
!!                                                                       !!
!! This file is part of the Data Assimilation Research Testbed (DART).   !!
!!                                                                       !!
!! DART is free software; you can redistribute it and/or modify          !!
!! it and are expected to follow the terms of the GNU General Public     !!
!! License as published by the Free Software Foundation.                 !!
!!                                                                       !!
!! DART is distributed in the hope that it will be useful,               !!
!! but WITHOUT ANY WARRANTY; without even the implied warranty of        !!
!! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         !!
!! GNU General Public License for more details.                          !!
!!                                                                       !!
!! You should have received a copy of the GNU General Public License     !!
!! along with DART; if not, write to:                                    !!
!!          Free Software Foundation, Inc.                               !!
!!          59 Temple Place, Suite 330                                   !!
!!          Boston, MA  02111-1307  USA                                  !!
!! or see:                                                               !!
!!          http://www.gnu.org/licenses/gpl.txt                          !!
!!                                                                       !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-->

<HTML>
<TITLE>PROGRAM perfect_model_obs</TITLE>
<link rel=stylesheet type=text/css href=../doc/html/doc.css>
<BODY>

<!--kdr PUBLIC COMPONENTS, PRIVATE COMPONENTS have no destinations -->

<DIV ALIGN=CENTER>
<A HREF="#PublicEntities">PUBLIC COMPONENTS</A> / 
<A HREF="#Namelist">NAMELIST</A> / 
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#KnownBugs">BUGS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#PrivateComponents">PRIVATE COMPONENTS</A>
</DIV>

<!--==================================================================-->

<H1>PROGRAM perfect_model_obs</H1>
<A NAME="HEADER"></A>
<TABLE summary="">
   <TR><TD>Contact:       </TD><TD> Jeff Anderson                </TD></TR>
   <TR><TD>Reviewers:     </TD><TD> &nbsp;                       </TD></TR>
   <TR><TD>Revision:      </TD><TD> $Revision$             </TD></TR>
   <TR><TD>Release Name:  </TD><TD> $Name$                       </TD></TR>
   <TR><TD>Change Date:   </TD><TD> $Date$ </TD></TR>
   <TR><TD>Change history:</TD><TD> see CVS log </TD></TR>
</TABLE>

<!--==================================================================-->

<A NAME="OVERVIEW"></A>
<HR>
<H2>OVERVIEW</H2>

<P>
   Main program for creating synthetic observation sequences given a
   model for use in filter assimilations. Reads in an observation sequence
   file which has only observation definitions and generates synthetic
   observation values for an output observation sequence file. The 
   execution of perfect_model_obs is controlled by the input observation
   sequence file and the model time-stepping capabilities in a manner
   analogous to that used by the filter program.
</P>

<P>
Optional namelist interface
<A HREF="#Namelist"> <em class=code>&#38;assim_model_nml</em> </A>
may be read from file <em class=file>input.nml</em>.
</P>


<!--==================================================================-->

<A NAME="OTHER MODULES USED"></A>
<BR><HR><BR>
<H2>OTHER MODULES USED</H2>
<PRE>
types_mod
utilities_mod
time_manager_mod
obs_sequence_mod
obs_def_mod
obs_model_mod
assim_model_mod
random_seq_mod
ensemble_manager_mod
</PRE>


<!--=================== DESCRIPTION OF A NAMELIST  ===================-->

<A NAME="Namelist"></A>
<BR><HR><BR>
<H2>NAMELIST</H2>
<P>We adhere to the F90 standard of starting a namelist with an ampersand 
'&#38;' and terminating with a slash '/'.
<div class=namelist><pre>
<em class=call>namelist / perfect_model_obs_nml / </em> &#38;
      async, adv_ens_command, obs_seq_in_file_name, &#38;
      obs_seq_out_file_name, start_from_restart, output_restart, &#38;
      restart_in_file_name, restart_out_file_name, init_time_days, init_time_seconds, &#38;
      output_interval
</pre></div>

<H3 class=indent1>Discussion</H3>

<P>This namelist is read in a file called <em class=file>input.nml</em>
</P>

<TABLE border=0 cellpadding=3 width=100%>
<TR><TH align=left>Contents    </TH>
    <TH align=left>Type        </TH>
    <TH align=left>Description </TH></TR>
<TR><!--contents--><TD valign=top>async                        </TD>
    <!--  type  --><TD valign=top>integer <em class="unit"></em></TD>
    <!--descript--><TD>Controls whether models are advanced via a subroutine call or
                       by writing initial condition files for ensemble members to 
                       disk and having shellscripts advance the model. <BR>
                       0 = advance by subroutine.  Default. <BR>
                       1 = shell advance using shell script piped to filter <BR>
                       2 = advance by F90 calls to shell to advance model, command to 
                       be executed is found in adv_ens_command <BR>
                       3 = advance by using an already running server process from
                       filter_server.csh.
                       </TD></TR>
<TR><!--contents--><TD valign=top>adv_ens_command              </TD>
    <!--  type  --><TD valign=top>character(len=129)           </TD>
    <!--descript--><TD>Character string containing command to be executed in order to
                       advance the model. Default is './advance_ens.csh'.</TD></TR>
<TR><!--contents--><TD valign=top>obs_sequence_in_file_name    </TD>
    <!--  type  --><TD valign=top>character(len=129)           </TD>
    <!--descript--><TD>File name that contains an observation sequence definition
                       file for input. Default is 'obs_seq.in'.</TD></TR>
<TR><!--contents--><TD valign=top>obs_sequence_out_file_name   </TD>
    <!--  type  --><TD valign=top>character(len=129)           </TD>
    <!--descript--><TD>File name for output observation sequence 
                       file. Default is 'obs_seq.out'.         </TD></TR>
<TR><!--contents--><TD valign=top>start_from_restart           </TD>
    <!--  type  --><TD valign=top>logical                      </TD>
    <!--descript--><TD>Should initial ensemble states come from (a) restart file(s). 
                       Default is .false.                      </TD></TR>
<TR><!--contents--><TD valign=top>output_restart               </TD>
    <!--  type  --><TD valign=top>logical                      </TD>
    <!--descript--><TD>Should (a) restart file(s) be written out for all ensemble 
                       members? Default is .false.             </TD></TR>
<TR><!--contents--><TD valign=top>restart_in_file_name         </TD>
    <!--  type  --><TD valign=top>character(len=129)           </TD>
    <!--descript--><TD>File name (root) for a file(s) containing restart state for all 
                       ensemble members.  Multiple files have extensions ".####", 
                       where #### is a 4 digit number representing the ensemble member. 
                       Default is 'filter_ics'.                </TD></TR>
<TR><!--contents--><TD valign=top>restart_out_file_name        </TD>
    <!--  type  --><TD valign=top>character(len = 129)         </TD>
    <!--descript--><TD>File name (root) for output restart file(s). 
                       See restart_in_file_name for multiple file information.
                       Default is 'filter_restart'.            </TD></TR>
<TR><!--contents--><TD valign=top>init_time_days               </TD>
    <!--  type  --><TD valign=top>integer                      </TD>
    <!--descript--><TD>Initial time of model (time is in days and seconds; see
                       time_manager). If init_time_days and init_time_seconds are 
                       less than 0, the initial time comes from the time in 
                       the restart file. Default value is 0.   </TD></TR> 
<TR><!--contents--><TD valign=top>init_time_seconds            </TD>
    <!--  type  --><TD valign=top>integer                      </TD>
    <!--descript--><TD>Initial time of model in seconds. Default is 0.  </TD></TR>
<TR><!--contents--><TD valign=top>output_interval              </TD>
    <!--  type  --><TD valign=top>integer                      </TD>
    <!--descript--><TD>The frequency with which output diagnostics are written.
                       Default value is 1. </TD></TR>
</TABLE>
<BR>

<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<BR><HR><BR>
<H2>FILES</H2>
<UL><LI>observation sequence input file; name comes from obs_seq_in_file_name
   <LI>observation sequence output file; name comes from obs_seq_out_file_name
   <LI>input state vector file; name comes from restart_in_file_name
   <LI>output state vector file; name comes from restart_out_file_name
   <LI>perfect_model_mod.nml in input.nml
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<BR><HR><BR>
<H2>REFERENCES</H2>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!-- Putting a <BR> after the synopsis creates a nice effect.         -->
<!--==================================================================-->


<A NAME="Errors"></A>
<HR>
<H2>ERROR CODES and CONDITIONS</H2>
<div class="errors">
<TABLE border=1 cellspacing=1 cellpadding=10 width=100%>
<TR><TH>Routine</TH><TH>Message</TH><TH>Comment</TH></TR>

<TR><!-- routine --><TD VALIGN=top>perfect_model_obs</TD>
    <!-- message --><TD VALIGN=top>Input obs_sequence file should not have any copies
                                    of data associated with it</TD>
    <!-- comment --><TD VALIGN=top>Perfect_model_obs just requires an observation 
                                   definition, not any values.</TD>
</TR>

</TABLE>
</div>

<!--==================================================================-->
<!-- Describe the bugs.                                               -->
<!--==================================================================-->

<A NAME="KnownBugs"></A>
<BR><HR><BR>
<H2>KNOWN BUGS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Descibe Future Plans.                                            -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<BR><HR><BR>
<H2>FUTURE PLANS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Have not fleshed out this part yet ... ha ha ha                  -->
<!--==================================================================-->


<H3 class=indent1>Discussion</H3>

<!--==================================================================-->

<HR>
</BODY>
</HTML>
