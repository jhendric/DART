# DART software - Copyright 2004 - 2011 UCAR. This open source software is
# provided by UCAR, "as is", without charge, subject to all terms of use at
# http://www.image.ucar.edu/DAReS/DART/DART_download
#
# DART $Id$

August 7, 2007

SCM compatible with WRFV2.2

Namelist documentation for wrf1d_namelist.input.  

NOTES:
1.  In general, namelist initialization in the code is poor.  It is best to make
sure you include an entry for all namelist variables.

-----------------------------
&record1 - contains general specifications on physics options,
vertical grid, time step etc.

init_f  - TRUE: input is obtained from profiles derived from 3d WRF runs or
          observations.  Namelist record2 is then the main controller.
        - FALSE: input is idealized.  Namelist record3 is then the main
          controller.

rnd_init - 1: Random linear combination of two random draws from climatology.
         - 2: Follows date given in namelist.
         - 3: Random perturbations constructed from combination of EOFs, centered on
date given in namelist.
         - 4: Same as (1), but centered on date given in namelist.
           NOTE: rnd_init !=2 is invalid for initialization from obs.

init_f_type - OBS: initialization from obs files
            - WRF: initialization from WRF files

force_f_type - OBS: forcing from obs files
             - WRF: forcing from WRF files
             - RUC: forcing from RUC files 
             NOTE: forcing is geostrophic wind components.  These are fundamentally
different in each case (see force_uvg in record2).  The weighting/draws
are the same as the initialization so they are consistent.

nudge_f_type - OBS: nudge upper levels to obs
             - WRF: nudge upper levels to WRF
             - NONE: don't nudge (recommended)

nudge_f_coeff - nudging coefficient [0,1]

nudge_f_hwpress - half-width of vertical weight on nudging coefficient in 
                  pressure coordinates (Pa) from the top of the model

ra_type - WRF: get surface SW/LW radiation from the WRF
        - INT: prescribe incoming solar radiation and use physics to
               compute radiative flux profiles
        - IDL: downwelling long and short-wave prescribed
               according to lat/long

fixed_timeofday - logical to run with constant incoming solar radiation, 
              which will be a function of the time of day specified below 
              in timeofday_ref.  This will only come into effect if the 
              radiation scheme is turned on.

radt - time interval between calls to radiation scheme

ra_lw_physics - long wave physics, only option is 'RRTMSCHEME'

ra_sw_physics - short wave physics, only option is 'SWRADSCHEME' (Dudhia)

bl_pbl_physics - options: YSUSCHEME,MRFSCHEME,GFSSCHEME,MYJPBLSCHEME

sf_sfclay_physics - options: SFCLAYSCHEME, MYJSFCSCHEME, GFSSFCSCHEME

sf_sfc_physics - options: SLABSCHEME, LSMSCHEME <NOAH>, RUCLSMSCHEME, FRSCHEME,
                 SIMPLESCHEME (skin temp varies sinusoidally) 

bucket_model - only applies to Force-Restore and slab schemes:
               NONE, BUCKET1, BUCKET2

mp_physics - mocrophysics options: NONE, LINSCHEME.  Requires correct
             allocations for water species
dt - model time step (s)

nz - numbers of vertical levels (grid is read from file "grid_wrf1d.ascii")

deep_soil_moisture - if deep soil moisture not available what fraction
                     of saturated value

P_QV - location of water vapor in moisture array (use 2 if moist run)
P_QC - location of cloud liquid water in moisture array
P_QR - '' rain (use for LINSCHEME)
P_QI - '' ice  (use for LINSCHEME)
P_QS - '' snow (use for LINSCHEME)
P_QG - '' graupel (use for LINSCHEME)
NOTE on above: any not used set to 1.  If using, increment 2-7.

ifsnow - 0/1 include snow cover effects?

isfflx - 0/1 include surface fluxes?
                 
pblh_ref - reference height of the PBL- not currently used

indir - directory where initialization and forcing data reside

outdir - directory for output text files

/

-----------------------------
&record2 - for initial/forcing profiles derived from 3d WRF, RUC, or OBS

init_f_file - 3x3xnz WRF cube derived from 3d WRF forecast (init_f_type=WRF)
            - file containing soundings (init_f_type=OBS)

init_flux_file - file containing radiative flux obs (init_f_type=OBS)

init_soil_file - file containing 2-point soil probe obs (init_f_type=OBS)

init_smos_file - file containing shelter obs, which is used to specify 
                 initial profiles if it is available, and used to
                 create obs networks (init_f_type=OBS)

uvg_file - if force_uvg = .true., geostrophic winds from this file replace
those from init_f_file.  This file contains single profiles that look
like the observations (sounding) file.

force_uvg - logical to use independent geostrophic winds, rather than the
full winds from init_f_file, which are also imposed constant below z_g.

out_f_file - output file with profiles at intervals specified in the
namelist below

eofs_file_init - file containing initialization EOFs (rnd_init=3,WRF)

eofs_file_forc - file containing forcing EOFs (rnd_init=3,WRF)

t_advection - logical to include temperature advection (WRF/RUC)
              NOTE: ignored if rnd_init=3

qv_advection - logical to include water vapor advection (WRF/RUC)
              NOTE: ignored if rnd_init=3

qc_advection - ditto for cloud water
qr_advection - ditto for rain water
qi_advection - ditto for cloud ice
qg_advection - ditto for graupel

u_advection - logical to include nonlinear wind advection (WRF/RUC)
              NOTE: ignored if rnd_init=3

output_state_vector - TRUE to output DART vector (only used with DART)

output_f_file - text file to output profiles

start_*_f - init_f = WRF: initialization date/time of WRF 3D forecast to grab 
            and maybe perturb, depending on the value of rnd_init.  Ignored
            if rnd_init = 1.
          - init_f = OBS: exact to initialize.  Needs to be in obs file

start_forecast - init_f = WRF: seconds after forcing date/time (start_*_f )
                 to start SCM 
                 init_f = OBS: always set to 0.

forecast_length - length of PBL_1D simulation (seconds).  
                  NOTE: constrained by forcing data if using

interval_* - interval at which WRF or OBS is available for forcing
             the profiles/fluxes/soil/surface met (seconds), depending on
             what is provided.   Make sure this is correct!  Typically,
             if init_f = WRF these will all be the same value.

interval_uvg - force_uvg = .true: interval for separately-specified 
               geostrophic winds
             - force_uvg = .false.: ignored

splineinterval* - an interval <= to the intervals specified above, to which
                  the forcing is interpolated in time with splines (seconds).

outfinterval - frequency of text output of profiles to output_f_file (seconds)

rnd_seed_val - random value to initialize sequence for use in initialization
               and forcing draws.  If positive, it is set to negative in the 
               code at startup.  

z_g - location AGL (m) below which to assume a constant U_g, V_g taken from
      that height.  If force_uvg = .true. this is ignored.


------------------------------------
&record3 - for runs starting from idealized profiles, BUT ALSO USED WHEN
           OTHER INPUT DATA IS UNAVAILABLE OR MISSING

odayfraction - .25 stands for 06 LST, .5 for 12 LST etc

totdayfraction - when to end integration, .25 stands for 06 LST, etc

outinterval - output interval for vertical profiles

dtamplitude_ref - daily amplitude for surface temperature (only for
surface_physics='SIMPLESCHEME')

dtdz_ref - temperature gradient, -999 for adiabatic gradient

u_g_ref - u-dir geostrophic wind

v_g_ref - v-dir geostrophic wind

qsrat_ref - saturation fraction for mixing ratio see
module_initialize.F how qv is initialized in module_initialize.F

rland_ref - 1 when land, 0 when water

mminlu_ref - which landuse table used

julday_ref - julian day

lu_index_ref - landuse category

mavail_ref - moisture availability

ivgtyp_ref - vegetation type

isltyp_ref - soil type

vegfra_ref - vegetation fraction

zo_ref - roughness in m

emiss_ref - emissivity

thc_ref - thermal inertia

albedo_ref - albedo

ts_ref - skin temperature
(only for surface_physics='SIMPLESCHEME')

tmn_ref - deep soil temperature
(only for surface_physics='SIMPLESCHEME')

ps_ref - surface pressure

lat_ref - latitude  of the place.  

lon_ref - longitude of the place

timeofday_ref - fixed time of day (hours GMT)

/
