<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<TITLE>DART Kodiak Release Notes</TITLE>
<link rel="stylesheet" type="text/css" href="doc.css" />
<link href="dart.ico" rel="shortcut icon" />
</HEAD>
<BODY>
<A NAME="TOP"></A>

<H1>DART Kodiak Release Notes</H1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="Dartboard7.png" alt="DART project logo" height=70 />
    </td>
    <td>
       <P>Jump to <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/index.html">DART Documentation Main Index</a><br />
          <small><small>version information for this file: <br />
          <!-- version tag follows, do not edit -->
          $Id$</small></small>
       </P></td>
</tr>
</table>

<A HREF="#Overview">Overview</A> /
<A HREF="#Nonbackward">Non-backwards Compatible Changes</A> /
<A HREF="#NewFeatures">New Features</A> /
<A HREF="#NewModels">New Models</A> /
<A HREF="#ChangedModels">Changed Models</A> /
<A HREF="#NewObs">New Observations</A> /
<A HREF="#NewDiagnostics">New Diagnostics and Documentation</A> /
<A HREF="#NewUtilities">New Utilities</A> /
<A HREF="#KnownProblems">Known Problems</A> /
<A HREF="#Legalese">Terms of Use</A>

<!--==================================================================-->

<A NAME="Overview"></A>
<H2>Overview</H2>

<P>
If you have been updating from the head of the DART subversion
repository, you will not notice much difference between that
and the Kodiak release.  If you are still running the Jamaica
release, there are a lot of new models, new observation types,
capabilities in the assimilation tools, new diagnostics, and
new utilities.  There is a very short list of non-backwards
compatible changes
(<a href="#Nonbackward">see below</a>), and then a long list
of new options and functions.
</P>

<P>
In recent years we have been adding new functionality to the
head of the subversion trunk and just testing it and keeping it
in working order, maintaining backwards compatibility.  We now
have many development tasks which will require non-compatible
changes in interfaces and behavior.   Further DART development
will occur on a branch, so checking out either the Kodiak branch
or the head of the repository is the recommended way to update
your DART tree.
</P>

<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="Nonbackward"></A>
<H2>Non-backwards Compatible Changes</H2>

<P>
Changes in the Kodiak release which are <em>not</em> backwards compatible
with the Jamaica release (svn revision number 2857, 12 April 2007):
</P>

<OL>

<LI> &amp;filter_nml used to have a single entry to control whether
to read in both the inflation values and standard deviations 
from a file or use the settings in the namelist.  The old namelist
item, <em class=code>inf_start_from_file</em>, has been replaced by
two items that allow the inflation values and the standard deviation
to be read in separately.  The new namelist items are
<em class=code>inf_initial_from_file</em> and 
<em class=code>inf_sd_initial_from_file</em>.  See the
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html#Namelist">filter namelist</a>
documentation for more details.
</LI>

<LI>The WRF/DART converter program used to be called
<em class=program>dart_tf_wrf</em>, had no namelist, 
and you entered <tt>T</tt> or <tt>F</tt> to indicate 
which direction you were converting.  Now we have
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/WRF_DART_utilities/dart_to_wrf.html">wrf_to_dart</a> 
and
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/WRF_DART_utilities/dart_to_wrf.html">dart_to_wrf</a> 
each with a namelist to control various options.
</LI>

<LI>The CAM/DART converter programs used to be called
<em class=program>trans_sv_pv</em> and <em class=program>trans_pv_sv</em>, 
with no namelists, and with several specialized variants 
(e.g. <em class=program>trans_pv_sv_time0</em>).
Now we have 
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/cam/cam_to_dart.html">cam_to_dart</a> and 
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/cam/dart_to_cam.html">dart_to_cam</a>, each with
a namelist to control various options.
</LI>

<LI>The <em class=code>obs_def_radar_mod.f90</em> radar observation
module was completely rewritten and the namelist has changed substantially.
See the <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_radar_mod.html">module documentation</a> 
for details.

For example, the defaults for the old code were:
<pre><tt>
&amp;obs_def_radar_mod_nml
   convert_to_dbz            =  .true. ,
   dbz_threshold             =   0.001 ,
   apply_ref_limit_to_obs    = .false. ,
   reflectivity_limit_obs    =     0.0 ,
   lowest_reflectivity_obs   = -888888.0,
   apply_ref_limit_to_state  = .false. ,
   reflectivity_limit_state  =     0.0 ,
   lowest_reflectivity_state = -888888.0 /
</tt></pre>

and the new ones are:

<pre><tt>
&amp;obs_def_radar_mod_nml
   apply_ref_limit_to_obs     =  .true. ,
   reflectivity_limit_obs     =     0.0 ,
   lowest_reflectivity_obs    =     0.0 ,
   apply_ref_limit_to_fwd_op  =  .true. ,
   reflectivity_limit_fwd_op  =     0.0 ,
   lowest_reflectivity_fwd_op =     0.0 ,
   dielectric_factor          =   0.224 ,
   n0_rain                    =   8.0e6 ,
   n0_graupel                 =   4.0e6 ,
   n0_snow                    =   3.0e6 ,
   rho_rain                   =  1000.0 ,
   rho_graupel                =   400.0 ,
   rho_snow                   =   100.0 ,
   allow_wet_graupel          = .false.,
   microphysics_type          =       3 ,
   allow_dbztowt_conv         = .false. /
</tt></pre>
</LI>


<LI>The WRF &amp;model_mod namelist has changed.  It now
requires a <em class=code>wrf_state_variables</em> list to choose which
WRF fields are put into the state vector.  The order of the
field names in the list sets the order of the fields in the
state vector.  See the
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/model_mod.html#Namelist">WRF model_mod</a> 
documentation for details.  Although they haven't been removed
from the namelist, the following items have no effect
on the code anymore:

<UL>
<LI>num_moist_vars</LI>
<LI>surf_obs</LI>
<LI>soil_data</LI>
<LI>h_diab</LI>
</UL>

</LI>

<LI>The WRF model_mod now computes geometric heights
instead of geopotential heights.  It also uses the staggered
grids as read in from the <em class=file>wrfinput_dNN</em> file(s) 
instead of interpolating in the non-staggered grid to get
individual cell corners.
</LI>

<LI>The code in <em class=file>filter.f90</em> was corrected 
to match the documentation for how the namelist item
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html#Namelist">
<em class=code>input_qc_threshold</em></a> is handled.
In the Jamaica release, observations with 
incoming data QC values greater than
or equal to the namelist setting were discarded.  
Now only incoming data QC values greater than the 
<em class=code>input_qc_threshold</em> are discarded 
(values equal to the threshold are now kept).
</LI>

<LI>The <em class=program>merge_obs_seq</em> utility
has been replaced by the more comprehensive
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_sequence_tool.html">
<em class=program>obs_sequence_tool</em></a> utility.
</LI>

<LI>The prepbufr observation converter was located in the
<em class=file>DART/ncep_obs</em> directory in the
last release.   It has been moved to be with the other
programs that convert various types of observation files
into DART format.  It is now located in 
<em class=file>DART/observations/NCEP</em>.
</LI>

<LI>The sampling error correction generator program in
<em class=file>DART/system_simulation</em> now has a 
namelist &amp;full_error_nml.  See the
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/system_simulation/system_simulation.html">documentation</a>
for more details.  Tables for 40 common ensemble sizes are
pregenerated in the 
<em class=file>DART/system_simulation/final_full_precomputed_tables</em> 
directory.
</LI>

<LI>Most <em class=file>work</em> directories now have 
a <em class=program>quickbuild.csh</em> script
which recompiles all the executables
instead of a 
<em class=program>workshop_setup.csh</em> script.  
(Those directories used in the tutorial have both.)  
To control whether <em class=program>filter</em> is
compiled with or without MPI (as a parallel program or
not) the <em class=program>quickbuild.csh</em> script
takes the optional arguments <em class=code>-mpi</em> or
<em class=code>-nompi</em>.
</LI>

<LI>The <em class=program>preprocess</em> program was 
changed so that any obs_def files with module definitions
are directly included in the single 
<em class=file>obs_def_mod.f90</em> file.
This means that as you add and delete obs_def modules 
from your &amp;preprocess_nml namelist and rerun 
<em class=program>preprocess</em> you no longer have to 
add and delete different obs_def modules from your 
<em class=file>path_names_*</em> files.
</LI>

<LI>The utilities module now calls a function in the mpi_utilities code to
exit MPI jobs cleanly.  This requires that non-mpi programs now
include the <em class=file>null_mpi_utilities_mod.f90</em> file 
in their <em class=file>path_names_*</em> files.
</LI>

<LI>The <em class=file>DART/mpi_utilities</em> directory as distributed 
now works with all compilers except for gfortran.  In <em class=file>
DART/mpi_utilities</em> is a <em class=program>./fixsystem</em> script that
when executed will change the source files so they will compile with gfortran.
Previous releases compiled with gfortran as distributed but
no other compilers.
</LI>

<LI>The GPS Radio Occultation observation forward operator code now
requires a namelist, <em class=code>&amp;obs_def_gps_nml</em>.  See the
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_gps_mod.html#Namelist">GPS documentation</a> 
for details on what to add.  All <em class=file>input.nml</em> files in
the repository have had this added if they have the GPS module in their
<em class=code>&amp;preprocess_nml</em> namelist.
</LI>

</OL>


<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="NewFeatures"></A>
<H2>New Features</H2>

<UL>
<LI>Inflation Damping
    <UL><LI>Handles the case where observation density is irregular in time,
        e.g. areas which were densely observed at one point are no longer
        observed.  Adaptive inflation values can grow large where the observations
        are dense, and if that region is no longer observed the inflation is
        not recomputed.  Inflation damping shrinks the inflation values and
        compensates for this. See the <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html#Inflation">
        inflation documentation</a> for more details and paper references.</LI></UL>
</LI>
<LI>Sampling Error Correction
    <UL><LI>Compensates for the numbers of ensembles being small compared to the
        number of degrees of freedom in the system.  See the
        last item in <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html#GettingStarted">this list</a>
        for more details.</LI></UL>
</LI>
<LI>Adaptive Localization and Localization Diagnostics
    <UL><LI>See <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/assim_tools/assim_tools_mod.html#Localization">here</a>
         for a discussion of localization-related issues.</LI></UL>
</LI>
<LI>Scale height vertical localization option in 3d models
    <UL><LI>See <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/location/threed_sphere/location_mod.html#Namelist">here</a>
         for a discussion of specifying vertical localization in terms of
         scale height, and <a href="http://en.wikipedia.org/wiki/Scale_height">here</a>
         for a Wikipedia discussion of how scale height is defined.  Note that 
         there is no support in the diagnostic Matlab routines for observations
         using scale height as the vertical coordinate.</LI></UL>
</LI>
<LI>CAM supports FV code, PBS scripting
    <UL><LI>See <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/cam/model_mod.html">here</a> for details
         on the features of the CAM/DART system</LI></UL>
</LI>
<LI>Boxcar Kernel Filter Option
    <UL><LI>See 
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/assim_tools/assim_tools_mod.html#FilterTypes">here</a> for
     how to select it in the namelist.
    </LI></UL>
</LI>
<LI>Option for "undefined vertical location" for obs using the 3d sphere locations
    <UL><LI>See 
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/location/threed_sphere/location_mod.html">here</a> for how to
     specify it when creating observations.
    </LI></UL>
</LI>
<LI>Schedule module for repeated time intervals
    <UL><LI>See documentation <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/time_manager/schedule_mod.html">here</a>
    </LI></UL>
</LI>
<LI>Support for 2 different Mars calendars in time manager
    <UL><LI>Gregorian Mars</LI>
        <LI>Solar Mars</LI>
    </UL>
</LI>
<LI>Code corrections to make the smoother run correctly
</LI>
<LI>Forward operators now have access to the ensemble number and
the state time if they want to make use of this information
    <UL><LI>See the "Get Expected Obs From Def" section of this
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_mod.html">obs_def</a> documentation
    for details on how to use these values.</LI></UL>
</LI>
<LI>Option to output all echo of namelist values to a separate log file
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/utilities_mod.html#Namelist">utilities module
    documentation</a> for how to select where the namelist contents are output.</LI></UL>
</LI>
<LI>Large file support for netCDF
    <UL><LI>See the
    <a href="http://www.unidata.ucar.edu/software/netcdf/faq-lfs.html">Unidata
    netCDF documentation</a> pages for more information about what large file
    support gives you and what it is compatible with.</LI></UL>
</LI>
<LI>Better support for adaptive localization
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/assim_tools/assim_tools_mod.html#Localization">Localization
    section</a> of the assim_tools documentation for details.</LI></UL>
</LI>
<LI>Option to localize with different distances based on observation type
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/assim_tools/assim_tools_mod.html#Localization">Localization
    section</a> of the assim_tools documentation for details.</LI></UL>
</LI>
<LI>The error handler can take up to 3 lines of text, so you can give more
informative error messages on exit
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/utilities_mod.html#Interface">utilities module</a>
    documentation for details.</LI></UL>
</LI>
<LI>Option to output ensemble mean in restart file format when filter exits
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html#Namelist">filter program namelist</a>
    documentation for details.</LI></UL>
</LI>
<LI>The start of a suite of forecast verification and evaluation tools
    <UL><LI>See the
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_seq_verify.html">verification tool</a>
    documentation for details.</LI></UL>
</LI>
<LI>Performance improvement in the internal transposes for very large state
vectors.  all_vars_to_all_copies() now has a single receiver and multiple
senders, which is much faster than the converse.
</LI>
<LI>Better support for users who redefine R8 to be R4, so that filter runs
in single precision.  Fixed code which was technically correct but numerically
unstable in single precision when computing variance and covariances.
</LI>
<LI>Fixed a case in the 3D sphere locations code which made it possible that
some observations and state variables at higher latitudes might not be
impacted by observations which were barely within the localization cutoff.
</LI>
<LI>The observation type table at the top of all obs_seq files
now only contains the types actually found in the file.
</LI>
<LI>When one or more ensemble members fail to compute a valid forward operator,
the prior and/or posterior mean and standard deviation will be set to MISSING_R8
in the output obs_seq.final file in addition to setting the DART QC flag.
</LI>
<LI>Use less stack space by allocating large arrays instead of
declaring them as local (stack) variables in routines
</LI>
<LI>The copyright has changed from GPL (GNU) to an NCAR-specific one
which is found <a href="http://www.image.ucar.edu/DAReS/DART/DART_download">here</a>.
</LI>
</UL>


<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="NewModels"></A>
<H2>New Models</H2>


<UL>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/POP/model_mod.html">POP</a><br>
<a href="http://www.cesm.ucar.edu/models/ccsm2.0.1/pop/">Ocean model in CESM</a>
and <a href="http://climate.lanl.gov/Models/POP/">stand-alone version from
Los Alamos</a></LI>
<LI><a href="http://code.google.com/p/enkf-nssl-commas">NCOMMAS</a><br>
Mesoscale Atmospheric Model from NSSL, Norman, OK</LI>
<LI><a href="http://www.nrlmry.navy.mil/coamps-web/web/home">COAMPS</a><br>
The original version of the COAMPS interface code and scripts
was contributed by Tim Whitcomb, NRL, Monterey.
An updated version was contributed by Alex Reinecke, NRL, Monterey.
<br>
The primary differences from the original COAMPS model code are:
<br>
 - the ability to assimilate nested domains<br>
 - assimilates real observations<br>
 - a simplified way to specify the state vector<br>
 - I/O COAMPS data files<br>
 - extensive script updates to accommodate additional HPC environments<br>
</LI>
<LI>NOGAPS<br>
The Navy's operational global atmospheric prediction system.
See <a href="http://www.srh.noaa.gov/ssd/nwpmodel/html/nogover.htm">here</a>
for an overview of the 4.0 version of the model.  For more information on
the NOGAPS/DART system, contact Jim Hansen, jim.hansen at nrlmry.navy.mil</LI>
<LI><a href="http://data1.gfdl.noaa.gov/~arl/pubrel/m/am2/doc/">AM2</a><br>
 The GFDL Atmosphere model</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/MITgcm_ocean/model_mod.html">MITgcm_ocean</a><br>
The <a href="http://paoc2001.mit.edu/cmi/development/ocean.htm">ocean component</a>
of the MIT global model suite.
</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/simple_avection/simple_avection.html">simple_advection</a><br>
A simple model of advecting tracers such as CO</LI>
<LI><a href="http://planetwrf.com/">global/planet WRF</a><br>
A version of the WRF weather model adapted for other planets.</LI>
<LI><a href="http://cism.hao.ucar.edu/models_tiegcm.html">TIEgcm</a><br>
A thermosphere and ionosphere model from the NCAR HAO (High Altitude 
Observatory) Division.</LI>
</UL>

<P>
The <em class=file>DART/models/template</em> directory contains sample
files for adding a new model.  See 
<a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#adding_a_model">
this section</a> of the DART web pages for more help on adding a new model.
</P>

<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="ChangedModels"></A>
<H2>Changed Models</H2>

<UL>
<LI>WRF
<UL>
<LI>The WRF fields in the DART state vector are namelist settable,
with the order of the names in the namelist controlling the order
in the state vector.  No assumptions are made about number of moist
variables; all WRF fields must be listed explicitly.  The conversion
tools (<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/WRF_DART_utilities/dart_to_wrf.html">
dart_to_wrf and wrf_to_dart</a>) use this same namelist, so it is
simpler to avoid mismatches between the DART restart files and
what the WRF model_mod is expecting.</LI>
<LI>Support for the single column version of WRF has been incorporated into
the standard WRF model_mod.</LI>
<LI>advance_model.csh script reworked by Josh Hacker, Ryan Torn, and 
Glen Romine to add function and simplify the script.  
It now supports a restart-file-per-member, simplifies
the time computations by using the advance_time executable, and handles
boundary files more cleanly.  Plus added many additional comments, and ways
to select various options by setting shell variables at the top of the script.</LI>
<LI>Updates from Tim and Glen:<br>
 - Changed the variable name for the longitude array to better
match that used in WRF: XLON_d0* to XLONG_d0*<br>
 - Added the staggered coordinate variables (XLONG_U_d0*, XLAT_U_d0*, XLONG_V_d0*, XLAT_V_d0*, ZNW_d0*)<br>
- Use the staggered variables to look up point locations when interpolating
in a staggered grid.  Old code used to compute the staggered points from the
unstaggered grid, which was slightly inaccurate.<br>
 - Added additional attribute information, supporting long_name, description
(same info as long_name which is the standard, but WRF calls this attribute
'description'), units (previously supported) and named coordinates for the X
and Y directions (in keeping with WRF, we do not name the vertical coordinate).
</LI>
<LI>New scripts to generate LBC (lateral boundary condition) files
for WRF runs.</LI>
</UL>

<br> 
</LI>

<LI>CAM
<UL>
<LI>support for versions 4 and 5 of CAM, including tar files of changes
that must be made to the CAM source tree and incorporated into the CAM
executable</LI>
<LI>support leap years</LI>
<LI>use CLM restart file instead of initial file</LI>
<LI>various scripting changes to support archiving </LI>
<LI>save information from CAM for ocean and land forcing</LI>
<LI>scripts to archive months of obs_seq.finals</LI>
<LI>Added the changes needed to the CAM build tree for CAM 4.0.x</LI>
<LI>Updates to CAM documentation to bring it in sync with the
current code.</LI>
<LI>All trans routines replaced with: dart_to_cam, cam_to_dart,
and advance_time.</LI>
<LI>Minor changes to CAM model_mod, including adding a routine to
write out the times file so utilities can call it in a single
location, plus additional optional arg on write routine.</LI>
<LI>Most debugging output is off by default; a new namelist
item 'print_details' will re-enable the original output.</LI>
<LI>Added build support for new tools (closest member, common
subset, fill inflation) and removed for obsolete (merge obs).</LI>
<LI>The original 'trans' build files and src are now in a
'deprecated' directory so if users need them for backwards
compatibility, they are still available.</LI>
<LI>The archive scripts are updated for the HPSS (hsi) and
the MSS versions (msrcp) are removed.</LI>
<LI>The shell_scripts and full_experiment scripts are updated.</LI>
</UL>

<br> 
</LI>

<LI>Lorenz 2004/2005
<UL>
<LI>Fixed a bug in the model advance code which was
doing an extra divide by 2, causing incorrect results. </LI>
</UL>
</LI>

</UL>


<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="NewObs"></A>
<H2>New Observation Types/Sources</H2>

<UL>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/MADIS/MADIS.html">MADIS</a><br>
Converters for METAR, Mesonet, Rawinsondes, ACARS, Marine,
and Satellite Wind observations.  Optionally output moisture obs
as specific humidity, relative humidity, and/or dewpoint obs.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/SSEC/SSEC.html">SSEC</a><br>
Convert Satellite Wind obs to DART format.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/AIRS/AIRS.html">AIRS</a><br>
Satellite observed Temperature and Moisture obs.  </LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/quikscat/quikscat.html">QUIKscat</a><br>
Satellite observed surface winds.  </LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/GTSPP/GTSPP.html">GTSPP</a><br>
Ocean obs</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/WOD/WOD.html">WOD</a><br>
World Ocean Database (currently 2009) Temperature and Salinity obs</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_ocean_mod.f90">CODAR</a><br>
High frequency radar obs of ocean surface velocity.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/var/var.html">VAR</a><br>
Little-r and radar obs</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/text/text_to_obs.html">Text</a><br>
Reads text data files, a good template for converting obs stored in
files without some kind of data library format (netCDF, HDF, etc)</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_altimeter_mod.f90">Altimeter</a><br>
From a variety of sources.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_dewpoint_mod.f90">Dewpoint</a><br>
From a variety of sources.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_reanalysis_bufr_mod.f90">Dropsonde</a><br>
Sonde type separate from standard Radiosondes</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_TES_nadir_mod.f90">Mars TES radiances</a></LI>
<LI>hurricane/tropical storm vortex position<br>
(currently only implemented in 
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/model_mod.html">wrf model_mod</a>)</LI>
</UL>

<P>
All the observation converters have moved to their own
top level directory <em class=file>observations</em>.
See the <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/observations.html">overview 
documentation</a> for general information on creating observation
files for use in the ensemble assimilation system.
</P>

<P>
The GPS forward operators aren't new with this release, but the code
has been revised several times.  In particular, there is a new
namelist to set the maximum number of GPS obs supported in a single
execution of filter or the obs diag program.  Generally the default
value is large enough for anything less than a couple days, but if
you are running a month or longer of diagnostics for a time series
you can easily exceed the compiled in maximum.  
See the GPS documentation for 
<a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/GPS/gps.html">
creating GPS observation files</a>
or <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_def/obs_def_gps_mod.html">the forward
operator documentation</a>.
There are also heavily revised scripts which download and convert multiple days
of GPS obs at a time, with options to delete downloaded files automatically.
</P>

<P>
There are two modules to set observation error values when
creating new observation sequence files. One contains the
default values used by NCEP, and the other contains the values
used by ECMWF.  See the <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/observations/obs_error/README">
DART/observations/obs_error/README</a> file for more details.
</P>

<P>
The radar module was completely overhauled and the namelist
changed substantially.  See the item above in the
<a href="#Nonbackward">non-backward compatible</a> changes 
section for details.
</P>

<P>
The scripting for converting NCEP prepbufr observations has been
improved.  There are options to enable or disable the 'blocking' conversion,
to create 6 hour or daily output files, to swap bytes for little-endian
machines, and to run up to a month of conversions in parallel if you
have parallel hardware available.
</P>

<P>
There is a <em class=file>DART/observations/utilities</em> directory
where generic utilities can be built which are not dependent on any
particular model.
</P>

<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="NewDiagnostics"></A>
<H2>New Diagnostics and Documentation</H2>

<P>
<strong>Better Web Pages.</strong>
We've put a lot of effort into expanding
our documentation, but there's always room for more. For example, please check out the Matlab 
diagnostics section: <a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#mat_obs">http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#mat_obs</a> or the pages
outlining the observation sequence file contents: <a href="http://www.image.ucar.edu/DAReS/DART/DART_Observations.php#obs_seq_overview">http://www.image.ucar.edu/DAReS/DART/DART_Observations.php#obs_seq_overview</a>.
<br />
<br />
<strong>Please let us know where we are lacking.</strong>
</P>

<UL>
<LI>There is now a 
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/index.html">DART/index.html</a>
    in the DART distribution to quickly guide you to any of the documentation for the 
    routines or modules.
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/DART_LAB/DART_LAB.html">DART_LAB</a><br>
Matlab GUI presentation of fundamental assimilation concepts</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/link_obs.m">link_obs.m</a><br />
    allows one to view multiple observation attributes simultaneously and dynamically 
    select subsets of observations in one view and have those same obs highlighted 
    in the other views. Commonly called 'data brushing'.</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/threed_sphere/obs_diag.html">obs_diag</a>
    has undergone extensive revision. User-defined levels for all coordinate (height/pressure/etc), arbitrary
    number of regions, the inclusion of separate copies for all DART QC values, can 
    creates rank histograms from the <em class=file>obs_seq.final</em> files, if possible, and more.</LI>

<LI>Comparing two (or more) experiments<br />
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/two_experiments_profile.m">two_experiments_profile.m</a> and 
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/two_experiments_evolution.m">two_experiments_evolution.m</a>
    compare <strong>multiple</strong> (not just two) <em class=file>obs_diag_output.nc</em>
    files on the same graphic to allow for easy examination of experiment attributes
    (rmse, biase, etc.). Some new utilities for subsetting observation sequence files in order to 
    make fair comparisons are described below.</LI>

<LI><a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#configure_matlab">Simpler netCDF support in Matlab.</a><br />
    The DART Matlab routines no longer depend on 4 third-party toolboxes, we are down to just
    <a href="http://mexcdf.sourceforge.net/downloads/">mexnc</a> and 
    <a href="http://mexcdf.sourceforge.net/downloads/">snctools</a>. Soon, we may just use snctools!</LI>

<LI>Matlab support for CAM.<br />
    CAM is now fully supported for all the Matlab interfaces that are used in the demos -
    this includes the state-space tools in <em class=file>DART/matlab</em> that allow for 
    determining correlations among state variables, among other things. 
    </LI>

<LI>Matlab support for WRF.<br />
    WRF is now fully supported for all the Matlab interfaces that are used in the demos -
    this predominanty includes the state-space tools in <em class=file>DART/matlab</em>
    like <em class=program>plot_total_err</em>.
    The <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/matlab/map_wrf.m">map_wrf.m</a> function can finally plot WRF fields now that the required metadata is part of the
    <em class=file>Posterior_Diag.nc</em>,
    <em class=file>Prior_Diag.nc</em>, and (not required)
    <em class=file>True_State.nc</em> files. It's a small step to augment this routine to make
    publication-quality figures of WRF fields.
    </LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/regression">Regression tests</a> for WRF<br />
   WRF test cases for WRF V2 and V3 for CONUS (Continental or Contiguous
   United States), a Global WRF case, and a Radar test case.  The data files
   are on a web server because they are too large to add to the repository.
   The README files in each directory gives instructions on how to download them.
</LI>


<LI>other new model support<br />
    The <em class=file>simple_advection</em> and <em class=file>MITgcm_ocean</em> are fully
    supported in the Matlab diagnostics.
</LI>

<LI>Optional detailed execution trace messages from
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/filter/filter.html">filter</a> by setting
    the namelist variable <em class=code>trace_execution</em>.</LI>

<LI><em class=file>input.nml</em> contents preserved in <em class=file>True_State.nc</em>, 
    <em class=file>Prior_Diag.nc</em>, and <em class=file>Posterior_Diag.nc</em> as 
    variable <em class=code>inputnml</em>.</LI>

<LI>Better error checking in obs_sequence creation to avoid out-of-time-order
    observations being inserted by incorrect programs.</LI>

<LI>Better error checking in the <em class=program>utilities_mod</em>
    <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/utilities_mod.html#open_file">open_file</a>() routine.</LI>

<LI>In the DART code tree, individual html pages have links back to the index page, 
    the namelists are moved up to be more prominent, and have other minor 
    formatting improvements.</LI>

<LI>The following Matlab observation-space diagnostic routines have been <strong>removed</strong>:
    <table width = 100% cellpadding=2>
    <tr><td valign=top>fit_ens_mean_time.m    </td>
        <td>plotted the temporal evolution of the ensemble mean of some quantity.</td></tr>
    <tr><td valign=top>fit_ens_spread_time.m  </td>
        <td>plotted the temporal evolution of the ensemble spread of some quantity.</td></tr>
    <tr><td valign=top>fit_mean_spread_time.m </td>
        <td>plotted the temporal evolution of the mean and spread of some quantity.</td></tr>
    <tr><td valign=top>obs_num_time.m         </td>
        <td>plotted the temporal evolution of the observation density. </td></tr>
    <tr><td valign=top>fit_ens_mean_vertical.m</td>
        <td>plotted the vertical profile of the ensemble mean of some quantity.</td></tr>
    <tr><td valign=top>fit_ens_bias_vertical.m</td>
        <td>plotted the vertical profile of the bias of the ensemble mean of some quantity.</td></tr>
    <tr><td valign=top>obs_num_vertical.m     </td>
        <td>plotted the vertical profile of the observation density.</td></tr>
    </table>
</LI>

<LI>The following Matlab observation-space diagnostic routines have been <strong>added</strong>:
    <table width = 100% cellpadding=2>
    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_profile.m">plot_profile.m</a></td>
        <td>plots the vertical profile of any quantity for any copy with an overlay of 
            the observation density and number of observations assimilated.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_rmse_xxx_profile.m">plot_rmse_xxx_profile.m</a></td>
        <td>plots the vertical profile of the rmse and any quantity for any copy with an
            overlay of the observation density and number of observations assimilated.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_bias_xxx_profile.m">plot_bias_xxx_profile.m</a></td>
        <td>plots the vertical profile of the bias and any quantity for any copy with an 
            overlay of the observation density and number of observations assimilated.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/two_experiments_profile.m">two_experiments_profile.m</a></td>
        <td>plots the vertical profile of any quantity for any copy for multiple experiments 
            with an overlay of the observation density and number of observations assimilated 
            in each experiment.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_evolution.m">plot_evolution.m</a></td>
        <td>plots the temporal evolution of any quantity for any copy with an overlay of 
            the observation density and number of observations assimilated.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_rmse_xxx_evolution.m">plot_rmse_xxx_evolution.m</a></td>
        <td>plots the temporal evolution of the rmse and any quantity for any copy with an 
            overlay of the observation density and number of observations assimilated.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/two_experiments_evolution.m">two_experiments_evolution.m</a></td>
        <td>plots the temporal evolution for any quantity for any copy for multiple 
            experiements with an overlay of the observation density and number of 
            observations assimilated in each experiment.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/read_obs_netcdf.m">read_obs_netcdf.m</a></td>
        <td>reads a netCDF format observation sequence file. Simply need a single copy 
            and a single qc - no actual observation required. </td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_obs_netcdf.m">plot_obs_netcdf.m</a></td>
        <td>reads and plots the locations and values of any copy of the observations in 
            a DART netCDF format observation sequence file.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_obs_netcdf_diffs.m">plot_obs_netcdf_diffs.m</a></td>
        <td>reads and plots the locations and the difference of any two copies of the 
            observations in a DART netCDF format observation sequence file.</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_wind_vectors.m">plot_wind_vectors.m</a></td>
        <td>reads and plots the wind vectors of the observations in a DART netCDF format 
            observation sequence file (created by 
            <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_seq_to_netcdf.html">obs_seq_to_netcdf.f90</a>)</td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/link_obs.m">link_obs.m</a></td>
        <td>data brushing tool. Explores many facets of the observations simultaneously. </td></tr>

    <tr><td valign=top><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_rank_histogram.m">plot_rank_histogram.m</a></td>
        <td>If the ensemble members were preserved in the <em class=file>obs_seq.final</em> 
            file, <em class=program>obs_diag</em> will create rank histogram information 
            and store it in the <em class=file>obs_diag_output.nc</em> file. 
            <em class=program>plot_rank_histogram.m</em> will plot it.
            There are instructions on how to view the results with <em class=program>ncview</em> 
            or <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/diagnostics/matlab/plot_rank_histogram.m">plot_rank_histogram.m</a> 
            on the 
            <a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#obs_diagnostics">DART Observation-space Diagnostics</a> 
            page.</td></tr>
    </table>
</LI>
</UL>


<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="NewUtilities"></A>
<H2>New Utilities</H2>

<UL>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_seq_to_netcdf.html"
    >obs_seq_to_netcdf</a><br />
    Almost any DART observation sequences may be converted to a netCDF format file. I still haven't figured out how to succinctly store
    some of the radar observation metadata, but the observation values, locations, QC values etc. will be converted. This allows for variety
    of new diagnostics.  
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_seq_coverage.html"
    >obs_seq_coverage</a><br />
    is a step towards determining what locations and quantities are repeatedly observed during a specific time interval. This
    may be used to determine a network of observations that will be used to verify forecasts. 
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_selection.html"
    >obs_selection</a><br />
    is an optional companion routine to <em class=program>obs_seq_coverage</em>. This thins the observation sequence files to contain
    just the desired set of observations to use in the forecast step. There's no point evaluating all the observations that
    will not be used in the verification ...
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_seq_verify.html"
    >obs_seq_verify</a><br />
    is a companion routine to <em class=program>obs_seq_coverage</em>. This creates a netCDF file with variables that should
    make the calculation of skill scores, etc. <em>easy</em>. Variables like:
    <tt>METAR_U_10_METER_WIND(analysisT,&nbsp;stations,&nbsp;levels,&nbsp;copy,&nbsp;nmembers,&nbsp;forecast_lead)</tt>
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/obs_sequence/obs_common_subset.html"
    >select common observation subsets</a><br>
A tool that operates on two (will be extended to more) <em class=file>obs_seq.final</em> 
files which were output from two different runs of filter.  Assumes the same 
<em class=file>obs_seq.out</em> input file was used in both cases.  Outputs two new
<em class=file>obs_seq.final.new</em> files containing only the observations which were
assimilated in both experiments.  It allows for a fair comparision with the diagnostic tools.
</LI>

<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/restart_file_tool.html">restart file tool</a><br>
Generic tool that works on any DART restart file.  It is compiled with
the corresponding model_mod which tells it how large the state vector is.
It can alter the timestamps on the data, add or remove model advance times,
split a single file into 1-per-ensemble or the reverse, and can be used
to convert between ASCII and binary formats.
</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/time_manager/advance_time.html">advance time tool</a><br>
A generic utility for adding intervals to a Gregorian calendar date and printing
out the new date, including handling leap year and month and year rollovers.  
The original code was part of the WRF distribution; this version uses the 
DART time manager subroutines to do the time computations.  It reads from
the console/standard input to avoid trying to handle command line arguments
in a compiler-independent manner, and outputs in various formats depending
on what is requested via additional flags.
</LI>
<LI>WRF observation preprocessor tool<br>
Observation preprocessor which is WRF aware, contributed by Ryan Torn.
Will select obs only within the WRF domain, will superob,
will select only particular obs types based on the namelist.
</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/closest_member_tool.html">closest member tool</a><br>
Combined with the new filter option to output the ensemble mean values in
a DART restart file format, this tool allows you to select the N <i>closest</i>
members, where there are multiple choices for how the metric is computed.
There are also ways to select a subset of the state vector by item kind
(as returned from the <a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/model_mod.html#get_state_meta_data">
get_state_meta_data() routine</a> and compute the metric only on those values.
</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/adaptive_inflate/fill_inflation_restart.html">fill inflation tool</a><br>
Small tool that fills inflation restart files with constant initial inflation
and standard deviation values.  Often the first step of a multi-step assimilation
job differs in the namelist only for how the initial inflation values are defined.
Running this tool creates the equivalent of an IC file for inflation, so the
first job step can start from a restart file as all subsequent job steps do and
allows the use of a single <em class=file>input.nml</em> file.
</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/models/wrf/WRF_DART_utilities/replace_wrf_fields.html"
>replace WRF fields tool</a><br>
WRF-specific tool that moves netCDF variables from one
file to another.  Field names to be moved can be specified
directly in the namelist or can be listed in a separate file.</LI>
<LI><a href="https://proxy.subversion.ucar.edu/DAReS/DART/trunk/utilities/model_mod_check.html">
model_mod verification/check tool</a><br>
Tool to help when creating a new model interface file (usually named 
<em class=file>model_mod.f90</em>).  Calls routines to help with
debugging.
</LI>
</UL>

Minor items:
<UL>
<LI>Most tools which work with observation sequence files now 
have the namelist option
to specify the input files in one of two methods: an explicit list of
input obs_seq files, or the name of a file which contains the list
of obs_seq files.</LI>
<LI>The <em class=file>DART/shell_scripts</em> directory contains
example scripts which loop over multiple days, in formats for
various shell syntaxes.  They are intended as an example for use
in advance_model or job scripts, or observation conversion 
programs contributed by users.
</UL>

<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="KnownProblems"></A>
<H2>Known Problems</H2>

<UL>
<LI>We get an internal compiler error when
compiling the <em class=file>obs_diag</em> program 
on a Linux machine using the gfortran compiler version 4.1.2.
If you get this error try a newer version of the Gnu compiler tools.
We have used 4.3 and 4.4 successfully.
</LI>
</UL>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<div><hr /><p align=right><a href="#"><small>[top]</small></a></p></div>
<A NAME="Legalese"></A>
<H2>Terms of Use</H2>

<P>
DART software - Copyright 2004 - 2011 UCAR.<br>
This open source software is provided by UCAR, "as is",<br>
without charge, subject to all terms of use at<br>
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</P>

<TABLE border=0 cellpadding=0 width=100% summary="">
<TR><TD valign=top>Contact:       </TD><TD> DART core group   </TD></TR>
<TR><TD>Revision:      </TD><TD> $Revision$ </TD></TR>
<TR><TD>Source:        </TD><TD> $URL$ </TD></TR>
<TR><TD>Change Date:   </TD><TD> $Date$ </TD></TR>
<TR><TD valign=top>Change&nbsp;history:&nbsp;</TD><TD> try "svn&nbsp;log" or "svn&nbsp;diff" </TD></TR>
</TABLE>

<!--==================================================================-->

</BODY>
</HTML>
