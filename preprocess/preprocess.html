<!--
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!                                                                       !!
!!                   GNU General Public License                          !!
!!                                                                       !!
!! This file is part of the Data Assimilation Research Testbed (DART).   !!
!!                                                                       !!
!! DART is free software; you can redistribute it and/or modify          !!
!! it and are expected to follow the terms of the GNU General Public     !!
!! License as published by the Free Software Foundation.                 !!
!!                                                                       !!
!! DART is distributed in the hope that it will be useful,               !!
!! but WITHOUT ANY WARRANTY; without even the implied warranty of        !!
!! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         !!
!! GNU General Public License for more details.                          !!
!!                                                                       !!
!! You should have received a copy of the GNU General Public License     !!
!! along with DART; if not, write to:                                    !!
!!          Free Software Foundation, Inc.                               !!
!!          59 Temple Place, Suite 330                                   !!
!!          Boston, MA  02111-1307  USA                                  !!
!! or see:                                                               !!
!!          http://www.gnu.org/licenses/gpl.txt                          !!
!!                                                                       !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-->

<HTML>
<TITLE>program preprocess</TITLE>
<link rel="stylesheet" type="text/css" href="../doc/html/doc.css">
<BODY>

<DIV ALIGN=CENTER>
<A HREF="#Interface">INTERFACE</A> / 
<A HREF="#PublicEntities">PUBLIC COMPONENTS</A> / 
<A HREF="#Namelist">NAMELIST</A> / 
<A HREF="#FilesUsed">FILES</A> /
<A HREF="#References">REFERENCES</A> /
<A HREF="#Errors">ERRORS</A> /
<A HREF="#KnownBugs">BUGS</A> /
<A HREF="#FuturePlans">PLANS</A> /
<A HREF="#PrivateComponents">PRIVATE COMPONENTS</A>
</DIV>

<!--==================================================================-->

<H1>PROGRAM preprocess</H1>
<A NAME="HEADER"></A>
<TABLE summary="">
   <TR><TD>Contact:       </TD><TD> Jeff Anderson                </TD></TR>
   <TR><TD>Reviewers:     </TD><TD> &nbsp;                       </TD></TR>
   <TR><TD>Revision:      </TD><TD> $Revision$             </TD></TR>
   <TR><TD>Change Date:   </TD><TD> $Date$ </TD></TR>
   <TR><TD>Change history:</TD><TD> see CVS log (cop-out, I know)</TD></TR>
</TABLE>

<!--==================================================================-->

<A NAME="OVERVIEW"></A>
<HR>
<H2>OVERVIEW</H2>

<P>
Program to preprocess the <em class="file">ALL_obs_def_mod.F90</em> to remove 
code sections that are not needed for the selected observation types. The resulting 
file: <em class="file">obs_def_mod.f90</em>, is to be compiled by subsequent programs.
The sections of <em class="file">ALL_obs_def_mod.F90</em> that are optional are 
delimited by 
<pre><em class="code">
	#IFDEF observation_type
	#ENDIF</em>
</pre>
where <em class="code">observation_type</em> is the name of one of the types of observations
defined in <em class="file">ALL_obs_def_mod.F90</em>. The observation kinds 
to be assimilated or evaluated are specified by entries in the 
<em class=code>&obs_def_nml</em> which is read by <em class="program">preprocess</em>. 
Code for ifdef blocks that are <strong>not</strong> to be assimilated or
evaluated are <strong>not</strong> included in <em class="file">obs_def_mod.f90</em>. 
</P>

<!--==================================================================-->

<A NAME="OTHER MODULES USED"></A>
<BR><HR><BR>
<H2>OTHER MODULES USED</H2>
<PRE>
types_mod
utilities_mod
</PRE>

<P>
Optional namelist interfaces <em class=code>&obs_def_nml</em> 
and <em class=code>&preprocess_nml</em> 
may be read from file <em class=file>input.nml</em>.
</P>

<!--==================================================================-->
<!-- Declare all public entities ...                                  -->
<!-- duplicate public routines template as many times as necessary    -->
<!-- make sure you replace all yyyroutine?? strings                   -->
<!--==================================================================-->


<!--==================================================================-->
<!--=================== DESCRIPTION OF A NAMELIST  ===================-->
<!--==================================================================-->

<A NAME="Namelist"></A>
<BR><HR><BR>
<H2>NAMELIST</H2>
<P>We adhere to the F90 standard of starting a namelist with an ampersand 
'&amp;' and terminating with a slash '/'.

<div class=namelist><pre>
<em class=call>namelist / preprocess_nml/ </em> &amp;
   input_file, output_file
</pre></div>
</P>

<H3 class=indent1>Discussion</H3>

<P>This namelist is read in a file called <em class=file>input.nml</em>
</P>

<TABLE border=0 cellpadding=3 width=100%>
<TR><TH align="left" width="15%">Contents    </TH>
    <TH align="left" width="30%">Type        </TH>
    <TH align="left" width="55%">Description </TH></TR>
<TR><!--contents--><TD valign=top>input_file           </TD>
    <!--  type  --><TD valign=top>character(len=129)<BR>
          <em class="unit">[default: 'no_default_input_file']</em></TD>
    <!--descript--><TD> The file to be preprocessed. Normally a relative 
    path_name to <em class="file">ALL_obs_def_mod.F90</em>.</TD></TR>
<TR><!--contents--><TD valign=top>output_file           </TD>
    <!--  type  --><TD valign=top>character(len=129)<BR>
          <em class="unit">[default: 'no_default_input_file']</em></TD>
    <!--descript--><TD> The file to be created. Normally a relative 
    path_name to <em class="file">obs_def_mod.f90</em>.</TD></TR>
</TABLE>

<div class=namelist><pre>
<em class=call>namelist / obs_def_nml/ </em> &amp;
   assimilate_these_obs_types, evaluate_these_obs_types
</pre></div>

<H3 class=indent1>Discussion</H3>

<P>This namelist is read in a file called <em class=file>input.nml</em>
</P>

<TABLE border=0 cellpadding=3 width=100%>
<TR><TH align="left" width="15%">Contents    </TH>
    <TH align="left" width="30%">Type        </TH>
    <TH align="left" width="55%">Description </TH></TR>
<TR><!--contents--><TD valign=top>assimilate_these_obs_types </TD>
    <!--  type  --><TD valign=top>character(len=129), dimension(max_obs_kinds)<BR>
          <em class="unit">[default: 'null']</em></TD>
    <!--descript--><TD> List of observation kinds to be assimilated
    specified by string name from <em class="file">ALL_obs_def_mod.F90</em>.</TD></TR>
<TR><!--contents--><TD valign=top>evaluate_these_obs_types</TD>
    <!--  type  --><TD valign=top>character(len=129), dimension(max_obs_kinds)<BR>
          <em class="unit">[default: 'null']</em></TD>
    <!--descript--><TD> List of observation kinds to be evaluated but not assimilated
    specified by string name from <em class="file">ALL_obs_def_mod.F90</em>. </TD></TR>
</TABLE>

<!--==================================================================-->
<!-- Describe the Files Used by this module.                          -->
<!--==================================================================-->

<A NAME="FilesUsed"></A>
<BR><HR><BR>
<H2>FILES</H2>
<UL><LI>input_file, specified by namelist; usually <em class="file">ALL_obs_def_mod.F90</em>.
    <LI>output_file, specified by namelist; usually <em class="file">obs_def_mod.f90</em>.
    <LI>namelistfile
</UL>

<!--==================================================================-->
<!-- Cite references, if need be.                                     -->
<!--==================================================================-->

<A NAME="References"></A>
<BR><HR><BR>
<H2>REFERENCES</H2>

<!--==================================================================-->
<!-- Describe all the error conditions and codes.                     -->
<!-- Putting a <BR> after the synopsis creates a nice effect.         -->
<!--==================================================================-->

<A NAME="Errors"></A>
<HR>
<H2>ERROR CODES and CONDITIONS</H2>
<div class="errors">
<TABLE border=1 cellspacing=1 cellpadding=10 width=100%>
<TR><TH>Routine</TH><TH>Message</TH><TH>Comment</TH></TR>

<TR><!-- routine --><TD VALIGN=top>preprocess</TD>
    <!-- message --><TD VALIGN=top>input file 'file name' does not exist.</TD>
    <!-- comment --><TD VALIGN=top>Need an input file to preprocess.</TD>
</TR>

<TR><!-- routine --><TD VALIGN=top>preprocess</TD>
    <!-- message --><TD VALIGN=top>output file 'file name' exists: MOVE TO AVOID OVERWRITE.</TD>
    <!-- comment --><TD VALIGN=top>Don't want to risk overwriting files.</TD>
</TR>
</TABLE>
</div>

<!--==================================================================-->
<!-- Describe the bugs.                                               -->
<!--==================================================================-->

<A NAME="KnownBugs"></A>
<BR><HR><BR>
<H2>KNOWN BUGS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Descibe Future Plans.                                            -->
<!--==================================================================-->

<A NAME="FuturePlans"></A>
<BR><HR><BR>
<H2>FUTURE PLANS</H2>
<P>
</P>

<!--==================================================================-->
<!-- Have not fleshed out this part yet ... ha ha ha                  -->
<!--==================================================================-->

<!--==================================================================-->

<HR>
</BODY>
</HTML>
